<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Apache DRUID 部署及使用" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="初始设置" /><meta property="og:description" content="初始设置" /><link rel="canonical" href="https://ohemin.github.io/posts/druid-started/" /><meta property="og:url" content="https://ohemin.github.io/posts/druid-started/" /><meta property="og:site_name" content="Hemin` Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-11-06T20:55:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Apache DRUID 部署及使用" /><meta name="twitter:site" content="@ohemin" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2017-11-06T20:55:00+08:00","datePublished":"2017-11-06T20:55:00+08:00","description":"初始设置","headline":"Apache DRUID 部署及使用","mainEntityOfPage":{"@type":"WebPage","@id":"https://ohemin.github.io/posts/druid-started/"},"url":"https://ohemin.github.io/posts/druid-started/"}</script><title>Apache DRUID 部署及使用 | Hemin` Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Hemin` Blog"><meta name="application-name" content="Hemin` Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="stylesheet" href="/assets/lib/bootstrap-4.6.1/bootstrap.min.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free-5.15.4/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/magnific-popup-1.1.0/magnific-popup.css"> <script src="/assets/lib/jquery-3.6.0/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" http://rcmxo16by.bkt.gdipper.com//assets/img/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hemin` Blog</a></div><div class="site-subtitle font-italic">Hemin's technology blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ohemin" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/ohemin" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hemin.hz','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Apache DRUID 部署及使用</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Apache DRUID 部署及使用</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://twitter.com/MinHe15638041">Min He</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1509972900" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2017-11-06 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="943 字"> <em>5 分钟</em>阅读</span></div></div></div><div class="post-content"><h2 id="初始设置"><span class="mr-2">初始设置</span><a href="#初始设置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="修改时区"><span class="mr-2">修改时区</span><a href="#修改时区" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">druid/conf/druid/broker/jvm.config</code> 里的 <code class="language-plaintext highlighter-rouge">UTC</code> 修改为 <code class="language-plaintext highlighter-rouge">Asia/Shanghai</code></p><h3 id="hdfs数据加载支持"><span class="mr-2">HDFS数据加载支持</span><a href="#hdfs数据加载支持" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>修改 <code class="language-plaintext highlighter-rouge">druid/conf/druid/_common/common.runtime.properties</code> , 确保 <code class="language-plaintext highlighter-rouge">druid.extensions.loadList</code> 中有 <code class="language-plaintext highlighter-rouge">druid-hdfs-storage</code>，在 <code class="language-plaintext highlighter-rouge">druid/conf/druid/_common/</code> 目录中添加以下hadoop配置文件 的软链接 <code class="language-plaintext highlighter-rouge">core-site.xml, hdfs-site.xml, yarn-site.xml, mapred-site.xml</code></p><h2 id="启动分布式服务"><span class="mr-2">启动分布式服务</span><a href="#启动分布式服务" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="测试环境示例"><span class="mr-2">测试环境示例</span><a href="#测试环境示例" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>DRUID 部署在同一服务器 <code class="language-plaintext highlighter-rouge">jt-host-kvm-53</code></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c"># 启动 historical</span>
<span class="nb">nohup </span>java <span class="sb">`</span><span class="nb">cat </span>conf-quickstart/druid/historical/jvm.config | xargs<span class="sb">`</span> <span class="se">\</span>
  <span class="nt">-cp</span> <span class="s2">"conf-quickstart/druid/_common:conf-quickstart/druid/historical:lib/*"</span> <span class="se">\</span>
  io.druid.cli.Main server historical <span class="o">&gt;</span> log/historical.log 2&gt;&amp;1 &amp;

<span class="c"># 启动 broker</span>
<span class="nb">nohup </span>java <span class="sb">`</span><span class="nb">cat </span>conf-quickstart/druid/broker/jvm.config | xargs<span class="sb">`</span> <span class="se">\</span>
  <span class="nt">-cp</span> <span class="s2">"conf-quickstart/druid/_common:conf-quickstart/druid/broker:lib/*"</span> <span class="se">\</span>
  io.druid.cli.Main server broker <span class="o">&gt;</span> log/broker.log 2&gt;&amp;1 &amp;

<span class="c"># 启动 coordinator</span>
<span class="nb">nohup </span>java <span class="sb">`</span><span class="nb">cat </span>conf-quickstart/druid/coordinator/jvm.config | xargs<span class="sb">`</span> <span class="se">\</span>
  <span class="nt">-cp</span> <span class="s2">"conf-quickstart/druid/_common:conf-quickstart/druid/coordinator:lib/*"</span> <span class="se">\</span>
  io.druid.cli.Main server coordinator <span class="o">&gt;</span> log/coordinator.log 2&gt;&amp;1 &amp;

<span class="c"># 启动 overlord</span>
<span class="nb">nohup </span>java <span class="sb">`</span><span class="nb">cat </span>conf-quickstart/druid/overlord/jvm.config | xargs<span class="sb">`</span> <span class="se">\</span>
  <span class="nt">-cp</span> <span class="s2">"conf-quickstart/druid/_common:conf-quickstart/druid/overlord:lib/*"</span> <span class="se">\</span>
  io.druid.cli.Main server overlord <span class="o">&gt;</span> log/overlord.log 2&gt;&amp;1 &amp;

<span class="c"># 启动 middleManager</span>
<span class="nb">nohup </span>java <span class="sb">`</span><span class="nb">cat </span>conf-quickstart/druid/middleManager/jvm.config | xargs<span class="sb">`</span> <span class="se">\</span>
  <span class="nt">-cp</span> <span class="s2">"conf-quickstart/druid/_common:conf-quickstart/druid/middleManager:lib/*"</span> <span class="se">\</span>
  io.druid.cli.Main server middleManager <span class="o">&gt;</span> log/middleManager.log 2&gt;&amp;1 &amp;
</pre></table></code></div></div><h3 id="集群部署示例"><span class="mr-2">集群部署示例</span><a href="#集群部署示例" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>参照测试环境命令，将进程部署到不同服务器，本例资源受限根据服务负载进行了部分隔离</p><div class="table-wrapper"><table><thead><tr><th>hosts<th>role<th>port<tbody><tr><td>big-elephant-1<td>kafka<td> <tr><td>big-elephant-4<td>broker,overlord<td> <tr><td>big-elephant-5<td>historical,coordinator,middleManager<td> </table></div><h2 id="启动实时数据消费进程"><span class="mr-2">启动实时数据消费进程</span><a href="#启动实时数据消费进程" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">nohup </span>bin/tranquility kafka <span class="nt">-configFile</span> conf/yugong-status.json &amp;
</pre></table></code></div></div><h3 id="查看消费进程-log"><span class="mr-2">查看消费进程 Log</span><a href="#查看消费进程-log" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">tail</span> <span class="nt">-f</span> http://big-elephant-8:8090/druid/indexer/v1/task/[taskid]/log
</pre></table></code></div></div><h2 id="扩展工具"><span class="mr-2">扩展工具</span><a href="#扩展工具" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="druid-dumbo"><span class="mr-2">Druid Dumbo</span><a href="#druid-dumbo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>https://github.com/liquidm/druid-dumbo</p><ul><li>在HDFS中验证实时生成的原始数据。<li>重建与HDFS中原始数据不一致的细分。<li>将现有的段折叠成更高的粒度段。</ul><h2 id="示例配置文件"><span class="mr-2">示例配置文件</span><a href="#示例配置文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>这个示例从kafka消息系统中消费消息，将消息中的值以分钟为时间窗口单位，metric_code字段为维度，metric_value为度量字段进行值统计，统计包括最大、最小、合计、总记录数，相当于增强版本 WordCount 程序。</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"dataSources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataSchema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_append"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parser"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"parseSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestampSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyyy-MM-dd HH:mm:ss.SSS"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"dimensionsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"metric_code"</span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"metric_code"</span><span class="p">,</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="p">,</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"granularitySpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uniform"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"queryGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"minute"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metricsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleSum"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_sum"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleMin"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_min"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleMax"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_max"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"tuningConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maxRowsInMemory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"realtime"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"windowPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"intermediatePersistPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"topicPattern.priority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"topicPattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YugongMetricAppend"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataSchema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_complete"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parser"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"parseSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestampSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyyy-MM-dd HH:mm:ss.SSS"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"dimensionsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"metric_code"</span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"metric_code"</span><span class="p">,</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="p">,</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"granularitySpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uniform"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"queryGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"minute"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metricsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleSum"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_sum"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleMin"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_min"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doubleMax"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_max"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metric_value"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"tuningConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maxRowsInMemory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"realtime"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"windowPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"intermediatePersistPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"topicPattern.priority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"topicPattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YugongMetricComplete"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataSchema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yugong_writers"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parser"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"parseSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestampSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyyy-MM-dd HH:mm:ss.SSS"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createtime"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"dimensionsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"metricCode"</span><span class="p">,</span><span class="w"> </span><span class="s2">"metricDate"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"granularitySpec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uniform"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"queryGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"minute"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metricsSpec"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"tuningConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maxRowsInMemory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"realtime"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"windowPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"intermediatePersistPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT30M"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"topicPattern.priority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"topicPattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YugongWrite*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"zookeeper.connect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.33.35.192:2181,10.33.35.194:2181,10.33.35.196:2181"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"zookeeper.timeout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT20S"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"druid.selectors.indexing.serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"druid/overlord"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"druid.discovery.curator.path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/druid/discovery"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kafka.zookeeper.connect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.33.35.192:2181,10.33.35.194:2181,10.33.35.196:2181"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kafka.group.id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tranquility-k"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"consumer.numThreads"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"commit.periodMillis"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reportDropsAsExceptions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h2 id="以sql方式访问durid数据"><span class="mr-2">以SQL方式访问DURID数据</span><a href="#以sql方式访问durid数据" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="首先下载所需包进行验证测试"><span class="mr-2">首先下载所需包进行验证测试</span><a href="#首先下载所需包进行验证测试" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>java <span class="nt">-cp</span> lib/calcite-core-1.2.0-incubating.jar:lib/avatica-1.8.0.jar:lib/calcite-linq4j-1.2.0-incubating.jar:lib/mysql-connector-java-5.1.25.jar:lib/sqlline-1.4.0-SNAPSHOT-jar-with-dependencies.jar sqlline.SqlLine
</pre></table></code></div></div><h3 id="连接druid"><span class="mr-2">连接druid</span><a href="#连接druid" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>java <span class="nt">-cp</span> lib/jackson-annotations-2.8.0.jar:lib/jackson-core-2.8.1.jar:lib/jackson-databind-2.8.1.jar:lib/guava-11.0.2.jar:lib/calcite-core-1.2.0-incubating.jar:lib/calcite-linq4j-1.2.0-incubating.jar:lib/calcite-avatica-1.2.0-incubating.jar:lib/calcite-druid-1.13.0.jar:lib/sqlline-1.4.0-SNAPSHOT-jar-with-dependencies.jar sqlline.SqlLine
</pre></table></code></div></div><p>或者</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>java <span class="nt">-cp</span> lib/avatica-1.10.0.jar:lib/calcite-core-1.13.0.jar:lib/calcite-druid-1.13.0.jar:lib/calcite-linq4j-1.13.0.jar:lib/commons-compiler-2.7.6.jar:lib/commons-lang3-3.2.jar:lib/guava-18.0.jar:lib/jackson-annotations-2.8.0.jar:lib/jackson-core-2.8.1.jar:lib/jackson-databind-2.8.1.jar:lib/janino-2.7.6.jar:lib/joda-time-2.8.1.jar:lib/sqlline-1.4.0-SNAPSHOT-jar-with-dependencies.jar sqlline.SqlLine
</pre></table></code></div></div><p>然后</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>!connect jdbc:calcite:schemaFactory=org.apache.calcite.adapter.druid.DruidSchemaFactory;schema.url=http://big-elephant-4:8082;schema.coordinatorUrl=http://big-elephant-5:8081;caseSensitive=mysql admin admin
</pre></table></code></div></div><h3 id="执行sql查询"><span class="mr-2">执行SQL查询</span><a href="#执行sql查询" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="k">sum</span><span class="p">(</span><span class="k">count</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span> <span class="k">from</span> <span class="n">metric_append</span> <span class="k">where</span> <span class="n">__time</span> <span class="o">&gt;</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2017-08-10 00:00:00'</span> <span class="k">and</span> <span class="n">metric_code</span><span class="o">=</span><span class="s1">'lj.publishcargo.any.amount'</span> <span class="k">group</span> <span class="k">by</span> <span class="n">metric_code</span>
</pre></table></code></div></div><div file="~/word_count_plus.json" class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="~/word_count_plus.json"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="n">metric_sum</span> <span class="k">from</span> <span class="n">metric_complete</span> <span class="k">where</span> <span class="n">__time</span> <span class="o">&gt;</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2017-08-10 00:00:00'</span> <span class="k">and</span> <span class="n">metric_code</span><span class="o">=</span><span class="s1">'lj.publishcargo.any.amount'</span> <span class="k">order</span> <span class="k">by</span> <span class="n">__time</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">1</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/big-data/'>Big data</a>, <a href='/categories/druid/'>Druid</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Apache DRUID 部署及使用 - Hemin` Blog&amp;url=https://ohemin.github.io/posts/druid-started/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Apache DRUID 部署及使用 - Hemin` Blog&amp;u=https://ohemin.github.io/posts/druid-started/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://ohemin.github.io/posts/druid-started/&amp;text=Apache DRUID 部署及使用 - Hemin` Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/linux-usb-image/">Linux Usb Image</a><li><a href="/posts/canal-server-config/">Canal Server Config</a><li><a href="/posts/linux-vi-replace/">vi vim中的文本替换</a><li><a href="/posts/mac-mysql-install/">mac中安装MySQL数据库</a><li><a href="/posts/mysqldump-cmd/">MySQL数据备份命令mysqldump</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/command/">command</a> <a class="post-tag" href="/tags/develop/">develop</a> <a class="post-tag" href="/tags/environment/">environment</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/image/">image</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/updating/">updating</a> <a class="post-tag" href="/tags/idea/">idea</a> <a class="post-tag" href="/tags/security/">security</a></div></div></div><script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/kafka-command/"><div class="card-body"> <em class="timeago small" data-ts="1529602140" > 2018-06-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka 命令实战2</h3><div class="text-muted small"><p> Kafka 迭代很快，新版本又有不少变化，同事告诉我升级好了新集群，马上来练练 测试环境 zookeeper: 服务器名称 mt-zookeeper-vip:2181 1 2 3 4 10.77.32.90 mt-zookeeper-4 10.77.32.91 mt-zookeeper-5 10.77.32.92 mt-zookeeper-6 10.77.32.2 mt-zookee...</p></div></div></a></div><div class="card"> <a href="/posts/hadoop-hdfs-basis/"><div class="card-body"> <em class="timeago small" data-ts="1436544000" > 2015-07-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hadoop HDFS Basis</h3><div class="text-muted small"><p> Hadoop 包含三大组件分别是：HDFS（分布式文件系统）、MR（分布式计算引擎）、YARN（分布式资源管理） HDFS HDFS（Hadoop Distributed File System），名为Hadoop分布式文件系统，具有高容错、高吞吐量、容易扩展、高可靠性 的特征，是Hadoop生态重要的存储系统。 HDFS是主从结构的分布式系统，一个典型的HDFS系统包含一个Namen...</p></div></div></a></div><div class="card"> <a href="/posts/hadoop-mr-basis/"><div class="card-body"> <em class="timeago small" data-ts="1436889600" > 2015-07-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hadoop MR Basis</h3><div class="text-muted small"><p> Hadoop 包含三大组件分别是：HDFS（分布式文件系统）、MR（分布式计算引擎）、YARN（分布式资源管理） MR (MapReduce) MR是Hadoop中的计算模型，主要由三个阶段组成：Map &amp;gt; shuffle &amp;gt; Reduce。 Map阶段是对数据进行拆分(split)，将数据转化为键值对； Reduce是合并，将具有相同的Key的Value进行聚合，最终输...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/yarn-rest-api/" class="btn btn-outline-primary" prompt="上一篇"><p>YARN 生产集群办公环境无法访问</p></a> <a href="/posts/kafka-command/" class="btn btn-outline-primary" prompt="下一篇"><p>Kafka 命令实战2</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/MinHe15638041">Min He</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/command/">command</a> <a class="post-tag" href="/tags/develop/">develop</a> <a class="post-tag" href="/tags/environment/">environment</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/image/">image</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/updating/">updating</a> <a class="post-tag" href="/tags/idea/">idea</a> <a class="post-tag" href="/tags/security/">security</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="/assets/lib/simple-jekyll-search-1.10.0/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="/assets/lib/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script> <script src="/assets/lib/lozad-1.16.0/lozad.min.js"></script> <script src="/assets/lib/clipboard-2.0.9/clipboard.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/dayjs.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/locale/en.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/relativeTime.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="/assets/lib/bootstrap-4.6.1/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
